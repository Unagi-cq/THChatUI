{"version":3,"file":"js/310.4ba42894.js","mappings":"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","sources":["webpack://THChatUI/./src/views/kb/index.vue","webpack://THChatUI/./src/schema/kbStoreHelper.js","webpack://THChatUI/./src/views/kb/index.vue?440f"],"sourcesContent":["<template>\n    <div>\n        <!-- 知识库列表 -->\n        <el-row :gutter=\"24\" justify=\"center\" style=\"margin-left: 0;margin-right: 0;\">\n            <el-col :md=\"22\" :sm=\"22\" :xs=\"22\">\n                <div class=\"kb-header\">\n                    <h4>知识库</h4>\n                    <div class=\"kb-stats\">\n                        <span>总文件数: {{ totalFiles }}</span>\n                        <span>总分段数: {{ totalChunks }}</span>\n                    </div>\n                </div>\n\n                <!-- 知识库卡片列表 -->\n                <el-row :gutter=\"24\">\n                    <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"8\" :xl=\"6\">\n                        <div class=\"kb-card create-kb-card\" @click=\"createRepoDialogVisible = true\">\n                            <div class=\"create-kb-content\">\n                                <el-icon :size=\"40\">\n                                    <Plus />\n                                </el-icon>\n                                <span class=\"create-text\">创建知识库</span>\n                            </div>\n                        </div>\n                    </el-col>\n                    <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"8\" :xl=\"6\" v-for=\"repo in repos\" :key=\"repo.repoId\">\n                        <div class=\"kb-card dashed-border\">\n                            <div class=\"kb-card-header\">\n                                <div class=\"kb-card-title-row\">\n                                    <span class=\"kb-card-title\">{{ repo.name }}</span>\n                                    <div class=\"kb-card-actions\">\n                                        <el-tooltip content=\"管理\" placement=\"top\">\n                                            <SvgIcon icon-class=\"settings\" style=\"width: 16px; height: 16px;\"\n                                                @click=\"openRepo(repo)\" class=\"action-icon settings\" />\n                                        </el-tooltip>\n\n                                        <el-tooltip content=\"删除\" placement=\"top\">\n                                            <SvgIcon icon-class=\"trash\" style=\"width: 16px; height: 16px;\"\n                                                @click=\"deleteRepo(repo.repoId)\" class=\"action-icon delete\" />\n                                        </el-tooltip>\n                                    </div>\n                                </div>\n                            </div>\n                            <p class=\"kb-card-description\">{{ repo.description }}</p>\n                            <div class=\"kb-card-footer\">\n                                <span class=\"create-time\">创建时间: {{ repo.createTime }}</span>\n                            </div>\n                        </div>\n                    </el-col>\n                </el-row>\n\n            </el-col>\n        </el-row>\n\n        <!-- 自定义弹窗 -->\n        <CustomDialog v-model=\"createRepoDialogVisible\" title=\"知识库详情\">\n            <el-form :model=\"newKbForm\" label-width=\"100px\" :rules=\"rules\" ref=\"newKbForm\">\n                <el-form-item label=\"知识库名称\" prop=\"name\">\n                    <el-input v-model=\"newKbForm.name\" maxlength=\"10\" show-word-limit />\n                </el-form-item>\n                <el-form-item label=\"知识库描述\" prop=\"description\">\n                    <el-input type=\"textarea\" v-model=\"newKbForm.description\" />\n                </el-form-item>\n            </el-form>\n            <div style=\"text-align: right; margin-top: 20px;\">\n                <el-button type=\"primary\" @click=\"createRepo\">确定</el-button>\n                <el-button @click=\"createRepoDialogVisible = false\">取消</el-button>\n            </div>\n        </CustomDialog>\n\n        <!-- 知识库的文件列表弹窗 -->\n        <CustomDialog v-model=\"repoDialogVisible\" :title=\"`${activeRepo?.name || ''} - 文件列表`\">\n            <div class=\"file-container\">\n                <!-- 文件展示部分 -->\n                <div class=\"file-card\" v-for=\"x in files\">\n                    <img src=\"@/assets/images/file.svg\" alt=\"File Icon\" class=\"file-icon\" />\n                    <div class=\"file-details\">\n                        <div class=\"file-title\">\n                            {{ x.name }}\n                            <el-button type=\"text\" @click=\"toggleChunks(x)\">\n                                {{ x.showChunks ? '收起分段' : '查看分段' }}\n                            </el-button>\n                            <button class=\"delete-btn\" @click=\"delFile(x.fileId)\">&#x2715;</button>\n                        </div>\n                        <div class=\"file-info\">\n                            <span class=\"upload-time\">上传时间: {{ x.createTime }}</span>\n                            <span class=\"file-size\">文件大小: {{ formatFileSize(x.size) }}</span>\n                        </div>\n                        <!-- chunks预览部分 -->\n                        <div v-if=\"x.showChunks\" class=\"chunks-preview\">\n                            <div class=\"chunks-grid\">\n                                <div v-for=\"(chunk, index) in x.list\" :key=\"index\" class=\"chunk-square\"\n                                    @click=\"toggleChunkContent(x.fileId, index)\"\n                                    :class=\"{ 'expanded': isChunkExpanded(x.fileId, index) }\">\n                                    <div class=\"chunk-square-content\">\n                                        <template v-if=\"!isChunkExpanded(x.fileId, index)\">\n                                            <div class=\"chunk-number\">{{ index + 1 }}</div>\n                                        </template>\n                                        <template v-else>\n                                            <div class=\"chunk-expanded-header\">\n                                                <span>分段 {{ index + 1 }}</span>\n                                                <span class=\"chunk-length\">{{ chunk.content.length }} 字符</span>\n                                            </div>\n                                            <div class=\"chunk-expanded-content\">\n                                                <el-scrollbar height=\"200px\">\n                                                    {{ chunk.content }}\n                                                </el-scrollbar>\n                                            </div>\n                                        </template>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- 文件上传部分 -->\n                <div class=\"upload-card\" style=\"border-bottom: none;\">\n                    <el-upload class=\"upload-button\" drag :auto-upload=\"true\" :http-request=\"handleLocalUpload\" multiple\n                        :before-upload=\"beforeUpload\" :show-file-list=\"false\" accept=\".pdf,.doc,.docx,.txt\">\n                        <template v-if=\"!isUploading\">\n                            <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n                            <div class=\"el-upload__text\">\n                                将文件拖拽至此处 或 点击上传\n                            </div>\n                        </template>\n                        <template v-else>\n                            <el-progress type=\"circle\" :percentage=\"uploadProgress\"\n                                :status=\"uploadProgress === 100 ? 'success' : ''\" />\n                            <div class=\"upload-progress-text\">{{ uploadStatusText }}</div>\n                        </template>\n                        <template #tip>\n                            <div class=\"el-upload__tip\">\n                                目前仅支持5MB以内的PDF/DOC/DOCX/TXT文件上传，请确保文件格式正确\n                            </div>\n                        </template>\n                    </el-upload>\n                </div>\n            </div>\n        </CustomDialog>\n\n    </div>\n</template>\n\n<script>\nimport { Repository, File, Chunk } from '@/schema/kb';\nimport kbStoreHelper from '@/schema/kbStoreHelper';\nimport { Segment, useDefault } from 'segmentit';\n\nconst segmentit = useDefault(new Segment());\n\nexport default {\n    name: \"Kb\",\n    data() {\n        return {\n            // 当前选中的知识库\n            activeRepo: null,\n            // 创建知识库弹窗是否显示\n            createRepoDialogVisible: false,\n            // 创建知识库表单\n            newKbForm: {\n                // 知识库名称\n                name: '',\n                // 知识库描述\n                description: ''\n            },\n            // 创建知识库表单校验规则\n            rules: {\n                name: [\n                    { required: true, message: \"请输入知识库名称\", trigger: 'blur' }\n                ],\n                description: [\n                    { required: true, message: \"请输入知识库描述\", trigger: 'blur' }\n                ]\n            },\n            // 知识库详情弹窗是否显示\n            repoDialogVisible: false,\n            uploadProgress: 0, // 上传进度状态\n            isUploading: false, // 上传状态标志\n            uploadStatusText: '',\n            progressTimer: null, // 计时器变量\n            fileChunksVisibility: {}, // 用于存储每个文件的 chunks 显示状态\n            expandedChunks: {}, // 存储展开状态的chunks\n        }\n    },\n    computed: {\n        // 所有知识库列表\n        repos() {\n            return this.$store.state.app.kb.list;\n        },\n        // 当前选中知识库的文件列表,如果没有选中知识库则返回空数组\n        files() {\n            return this.activeRepo?.list || [];\n        },\n        // chunkSize\n        chunkSize() {\n            return this.$store.state.setting.chunk_size;\n        },\n        // 总文件数\n        totalFiles() {\n            return this.$store.state.app.kb.statistics.totalFiles;\n        },\n        // 总分段数\n        totalChunks() {\n            return this.$store.state.app.kb.statistics.totalChunks;\n        }\n    },\n    created() {\n\n    },\n    methods: {\n        /**\n         * 创建知识库\n         */\n        createRepo() {\n            this.$refs.newKbForm.validate((valid) => {\n                if (valid) {\n                    const newRepo = new Repository(\n                        Date.now(),\n                        this.newKbForm.name,\n                        new Date().toLocaleString(),\n                        this.newKbForm.description,\n                        []\n                    );\n                    kbStoreHelper.addRepo(newRepo);\n                    this.createRepoDialogVisible = false;\n                    this.newKbForm = { name: '', description: '' };\n                    this.$refs.newKbForm.resetFields();\n                }\n            });\n        },\n\n        /**\n         * 打开知识库详情页面弹窗\n         * @param {Repository} repo 要打开的知识库对象\n         */\n        openRepo(repo) {\n            this.activeRepo = repo;\n            this.repoDialogVisible = true;\n        },\n\n        /**\n         * 删除知识库\n         * @param {Number} repoId 要删除的知识库ID\n         */\n        deleteRepo(repoId) {\n            this.$confirm(\"确认要删除吗？\", \"警告\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: 'warning'\n            }).then(() => {\n                kbStoreHelper.delRepo(repoId);\n                this.$notify({\n                    title: \"成功\",\n                    message: \"删除成功\",\n                    type: 'success'\n                });\n            }).catch(() => { });\n        },\n\n        /**\n         * 上传文件前校验文件大小\n         * @param {File} file 待上传的文件对象\n         * @returns {boolean} 是否允许上传\n         */\n        beforeUpload(file) {\n            const maxSize = this.$store.state.setting.kb_file_size * 1024 * 1024;\n            if (file.size > maxSize) {\n                this.$notify({\n                    title: \"错误\",\n                    message: \"失败\",\n                    type: 'error'\n                });\n                return false; // 阻止上传\n            }\n            return true; // 允许上传\n        },\n\n        /**\n         * 处理本地文件上传\n         * @param {Object} options 上传选项对象\n         */\n        async handleLocalUpload(options) {\n            const file = options.file;\n\n            // 重置上传状态\n            this.isUploading = true;\n            this.uploadProgress = 0;\n            this.uploadStatusText = '准备上传...';\n\n            try {\n                // 模拟文件读取进度，使用衰减增长\n                const simulateProgress = setInterval(() => {\n                    if (this.uploadProgress < 90) {\n                        // 计算剩余进度空间\n                        const remainingProgress = 90 - this.uploadProgress;\n                        // 使用衰减因子，随着进度增加而减少增量\n                        const increment = Math.max(1, Math.floor(remainingProgress * 0.2));\n                        this.uploadProgress += increment;\n                        this.uploadStatusText = '正在处理文件...';\n                    }\n                }, 1000);\n\n                // 读取文件内容\n                const content = await this.readFileContent(file);\n\n                // 检查内容是否为空\n                if (!content || content.trim() === '') {\n                    this.$notify({\n                        title: \"警告\",\n                        message: \"未识别到文件内容\",\n                        type: 'warning'\n                    });\n                    this.isUploading = false;\n                    this.uploadProgress = 0;\n                    this.uploadStatusText = '';\n                    return;\n                }\n\n                // 将内容分割成chunks\n                const chunks = this.splitContentIntoChunks(content, this.chunkSize);\n\n                // 清除进度模拟\n                clearInterval(simulateProgress);\n\n                // 创建文件对象\n                const fileData = new File(\n                    Date.now(),\n                    file.name,\n                    new Date().toLocaleString(),\n                    file.name.split('.').pop().toLowerCase(),\n                    '',\n                    file.size,\n                    chunks.map(chunk => new Chunk(Date.now(), chunk, segmentit.doSegment(chunk.toLowerCase()).map(word => word.w))) // 添加chunks并分词\n                );\n\n                // 添加文件到知识库\n                kbStoreHelper.addFile(this.activeRepo.repoId, fileData);\n\n                // 完成上传\n                this.uploadProgress = 100;\n                this.uploadStatusText = '上传完成！';\n\n                // 显示成功通知\n                this.$notify({\n                    title: \"成功\",\n                    message: '上传完成！',\n                    type: 'success'\n                });\n\n                // 重置状态\n                setTimeout(() => {\n                    this.isUploading = false;\n                    this.uploadProgress = 0;\n                    this.uploadStatusText = '';\n                }, 1500);\n\n            } catch (error) {\n                console.error('文件上传失败:', error);\n                this.uploadStatusText = '上传失败';\n\n                this.$notify({\n                    title: \"错误\",\n                    message: \"上传失败\",\n                    type: 'error'\n                });\n\n                // 重置状态\n                setTimeout(() => {\n                    this.isUploading = false;\n                    this.uploadProgress = 0;\n                    this.uploadStatusText = '';\n                }, 1500);\n            }\n        },\n\n        /**\n         * 读取文件内容 分流处理\n         * @param {File} file 文件对象\n         */\n        async readFileContent(file) {\n            const fileType = file.name.split('.').pop().toLowerCase();\n\n            switch (fileType) {\n                case 'pdf':\n                    return await this.readPdfContent(file);\n                case 'doc':\n                case 'docx':\n                    return await this.readDocContent(file);\n                case 'txt':\n                    return await this.readTxtContent(file);\n                default:\n                    throw new Error('不支持的文件格式');\n            }\n        },\n\n        /**\n         * 读取txt文本文件内容\n         * @param {File} file 文件对象\n         */\n        readTxtContent(file) {\n            return new Promise((resolve, reject) => {\n                const reader = new FileReader();\n                reader.onload = (e) => resolve(e.target.result);\n                reader.onerror = (e) => reject(e);\n                reader.readAsText(file, 'UTF-8');\n            });\n        },\n\n        /**\n         * 读取pdf文件内容\n         * @param {File} file 文件对象\n         */\n        async readPdfContent(file) {\n            return new Promise((resolve, reject) => {\n                const fileReader = new FileReader();\n\n                fileReader.onload = async (event) => {\n                    try {\n                        const pdfData = new Uint8Array(event.target.result);\n                        const pdf = await import('pdfjs-dist');\n                        pdf.GlobalWorkerOptions.workerSrc = '/pdfjs-dist@5.2.133/pdf.worker.min.mjs';\n\n                        const loadingTask = pdf.getDocument(pdfData);\n                        const pdfDoc = await loadingTask.promise;\n\n                        let fullText = '';\n                        for (let i = 1; i <= pdfDoc.numPages; i++) {\n                            const page = await pdfDoc.getPage(i);\n                            const textContent = await page.getTextContent();\n                            const pageText = textContent.items.map(item => item.str).join(' ');\n                            fullText += pageText + '\\n';\n                        }\n\n                        resolve(fullText);\n                    } catch (error) {\n                        reject(error);\n                    }\n                };\n                fileReader.onerror = reject;\n                fileReader.readAsArrayBuffer(file);\n            });\n        },\n\n        /**\n         * 读取doc/docx文件内容\n         * @param {File} file 文件对象\n         */\n        async readDocContent(file) {\n            const mammoth = await import('mammoth');\n            const arrayBuffer = await file.arrayBuffer();\n            const result = await mammoth.extractRawText({ arrayBuffer });\n            return result.value;\n        },\n\n        /**\n         * 删除文件\n         * @param {string} fileId 文件ID\n         */\n        async delFile(fileId) {\n            try {\n                await this.$confirm(\n                    \"确认删除该文件?\",\n                    \"警告\",\n                    {\n                        confirmButtonText: \"确定\",\n                        cancelButtonText: \"取消\",\n                        type: 'warning'\n                    }\n                );\n\n                kbStoreHelper.delFile(this.activeRepo.repoId, fileId);\n\n                this.$notify({\n                    title: \"成功\",\n                    message: '文件删除成功',\n                    type: 'success'\n                });\n            } catch (error) {\n                if (error !== 'cancel') {\n                    console.error('文件删除失败:', error);\n                    this.$notify({\n                        title: \"错误\",\n                        message: '文件删除失败',\n                        type: 'error'\n                    });\n                }\n            }\n        },\n\n        /**\n         * 格式化文件大小\n         * @param {number} bytes 文件大小(字节)\n         * @returns {string} 格式化后的文件大小\n         */\n        formatFileSize(bytes) {\n            if (!bytes) return '0 B';\n            const k = 1024;\n            const sizes = ['B', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        },\n\n        // 添加新方法用于分割内容\n        splitContentIntoChunks(content, chunkSize) {\n            const chunks = [];\n            let currentChunk = '';\n            const sentences = content.split(/[。！？.!?]/); // 按句子分割\n\n            for (const sentence of sentences) {\n                if ((currentChunk + sentence).length > chunkSize) {\n                    if (currentChunk) {\n                        chunks.push(currentChunk.trim());\n                    }\n                    currentChunk = sentence;\n                } else {\n                    currentChunk += sentence;\n                }\n            }\n\n            if (currentChunk) {\n                chunks.push(currentChunk.trim());\n            }\n\n            return chunks;\n        },\n\n        /**\n         * 切换显示/隐藏文件的chunks\n         * @param {File} file 文件对象\n         */\n        toggleChunks(file) {\n            file.showChunks = !file.showChunks;\n        },\n\n        /**\n         * 切换chunk内容的显示状态\n         * @param {string} fileId 文件ID\n         * @param {number} index 分段索引\n         */\n        toggleChunkContent(fileId, index) {\n            const key = `${fileId}-${index}`;\n            this.expandedChunks[key] = !this.expandedChunks[key];\n        },\n\n        /**\n         * 判断chunk是否展开\n         * @param {string} fileId 文件ID\n         * @param {number} chunkIndex chunk索引\n         * @returns {boolean} 是否展开\n         */\n        isChunkExpanded(fileId, chunkIndex) {\n            const key = `${fileId}-${chunkIndex}`;\n            return this.expandedChunks[key];\n        }\n    },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n/**\n * 通用的hover和active效果定义\n */\n@mixin hover-active-effect {\n\n    &.active,\n    &:hover {\n        background: var(--aside-active-hover-bg);\n        border-radius: 5px;\n    }\n}\n\n/**\n * 表单Label颜色\n */\n:deep(.el-form-item__label) {\n    color: var(--common-color);\n}\n\n/**\n * 页面头部标题\n */\n.kb-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 28px;\n    line-height: 28px;\n    margin-bottom: 20px;\n\n    .kb-stats {\n        display: flex;\n        gap: 20px;\n        font-size: 14px;\n        color: var(--answer-stats-color);\n    }\n}\n\n/**\n * 知识库卡片\n */\n.kb-card {\n    display: flex;\n    flex-direction: column;\n    width: 90%;\n    padding: 5px 18px;\n    border-radius: 8px;\n    margin: 5px 0 5px 0;\n    height: 120px;\n    justify-content: space-between;\n    border: 2px solid var(--app-small-border-color);\n    box-shadow: none;\n    transition: all 0.2s ease;\n\n    &:hover {\n        transform: translateY(-2px);\n        border-color: var(--el-color-primary-light-5);\n    }\n\n    /* 卡片内部头部 */\n    >.kb-card-header {\n        font-weight: bold;\n        margin-bottom: 10px;\n\n        /* 卡片标题行,包含标题和操作按钮 */\n        >.kb-card-title-row {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n\n            /* 卡片操作按钮容器 */\n            >.kb-card-actions {\n                display: flex;\n                gap: 12px;\n\n                .action-icon {\n                    cursor: pointer;\n                    font-size: 16px;\n                    padding: 4px;\n                    opacity: 0.7;\n                    transition: all 0.2s;\n\n                    &:hover {\n                        opacity: 1;\n                        background: none;\n                        transform: scale(1.1);\n                    }\n\n                    &.delete:hover {\n                        color: #F56C6C;\n                    }\n                }\n            }\n        }\n    }\n\n    /* 卡片描述文本 */\n    .kb-card-description {\n        font-size: 12px;\n        line-height: 1.5;\n        color: #666;\n        margin-bottom: 10px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        line-clamp: 2;\n        -webkit-box-orient: vertical;\n    }\n\n    /* 卡片底部信息 */\n    .kb-card-footer {\n        font-size: 12px;\n        color: #999;\n\n        /* 创建时间 */\n        >.create-time {\n            font-style: italic;\n        }\n    }\n}\n\n/**\n * 创建知识库卡片\n */\n.create-kb-card {\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.3s;\n    border: 2px dashed var(--app-small-border-color);\n    background: transparent;\n\n    &:hover {\n        border-color: var(--el-color-primary);\n        background: transparent;\n\n        .create-kb-content {\n            color: var(--el-color-primary);\n        }\n    }\n\n    >.create-kb-content {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        color: #909399;\n\n        >.create-text {\n            margin-top: 10px;\n        }\n    }\n}\n\n.file-container {\n    display: flex;\n    flex-direction: column;\n    padding: 5px;\n    border-radius: 8px;\n    margin: 5px 0 5px 0;\n\n    /* 卡片样式 */\n    >.file-card,\n    .upload-card {\n        display: flex;\n\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px dashed grey;\n\n        /* 文件图标样式 */\n        >.file-icon {\n            width: 40px;\n            height: 40px;\n            object-fit: cover;\n            margin-right: 10px;\n            border-radius: 5px;\n        }\n\n        /* 文件详情样式 */\n        >.file-details {\n            flex: 1;\n\n            >.file-title {\n                font-weight: bold;\n                margin-bottom: 5px;\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                color: var(--common-color);\n\n                .delete-btn {\n                    background: none;\n                    border: none;\n                    color: #f00;\n                    cursor: pointer;\n                    font-size: 18px;\n                    padding: 0;\n                    margin-left: auto;\n                }\n            }\n\n            >.file-info {\n                display: flex;\n                gap: 15px;\n                color: var(--answer-stats-color);\n\n                .upload-time,\n                .file-size {\n                    white-space: nowrap;\n                }\n            }\n        }\n\n        /* 拖拽上传按钮 */\n        >.upload-button {\n            width: 100%;\n        }\n    }\n}\n\n:deep(.el-upload-dragger) {\n    padding: 0;\n    background: none;\n}\n\n.el-upload__tip {\n    text-align: center;\n}\n\n:deep(.el-page-header__content),\n:deep(.el-page-header__back) {\n    color: var(--common-color);\n}\n\n.upload-progress-text {\n    margin-top: 10px;\n    color: #909399;\n    text-align: center;\n}\n\n:deep(.el-progress) {\n    margin: 10px auto;\n}\n\n.chunks-preview {\n    margin-top: 10px;\n\n    .chunks-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));\n        gap: 8px;\n    }\n\n    .chunk-square {\n        border-radius: 8px;\n        cursor: pointer;\n        transition: all 0.2s;\n        border: 1px solid var(--app-small-border-color);\n        background: transparent;\n        color: var(--answer-stats-color);\n\n        &:hover {\n            border-color: var(--el-color-primary-light-5);\n        }\n\n        &.expanded {\n            aspect-ratio: auto;\n            grid-column: 1 / -1;\n            height: auto;\n            min-height: 250px;\n            border-width: 2px;\n        }\n\n        .chunk-square-content {\n            padding: 8px;\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n        }\n\n        .chunk-number {\n            text-align: center;\n        }\n\n        .chunk-length {\n            color: var(--answer-stats-color);\n            margin-top: 8px;\n        }\n\n        .chunk-expanded-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 12px;\n            font-weight: bold;\n        }\n\n        .chunk-expanded-content {\n            flex: 1;\n            line-height: 1.6;\n            color: var(--answer-stats-color);\n            white-space: pre-wrap;\n            word-break: break-word;\n        }\n    }\n}\n</style>\n","import store from '@/store'\n\nexport default {\n\n    /**\n     * 添加新的知识库Repo\n     * @param {Object} repo 知识库对象\n     */\n    addRepo(repo) {\n        let kb = store.state.app.kb;\n        kb.list.push(repo);\n        store.dispatch('setKb', kb);\n    },\n\n    /**\n     * 删除知识库Repo\n     * @param {string} repoId 要删除的知识库id\n     */\n    delRepo(repoId) {\n        let kb = store.state.app.kb;\n        kb.list = kb.list.filter(repo => repo.repoId !== repoId);\n        store.dispatch('setKb', kb);\n    },\n\n    /**\n     * 更新知识库Repo\n     * @param {string} repoId 要更新的知识库id\n     * @param {Object} newRepo 新的知识库对象\n     */\n    updRepo(repoId, newRepo) {\n        let kb = store.state.app.kb;\n        let index = kb.list.findIndex(repo => repo.id === repoId);\n        if (index !== -1) {\n            kb.list[index] = newRepo;\n            store.dispatch('setKb', kb);\n        }\n    },\n\n    /**\n     * 添加文件到知识库\n     * @param {string} repoId 知识库id\n     * @param {Object} file 文件对象\n     */\n    addFile(repoId, file) {\n        let kb = store.state.app.kb;\n        console.log(kb)\n        let repo = kb.findRepository(repoId);\n        if (repo) {\n            repo.addFile(file);\n            store.dispatch('setKb', kb);\n        }\n    },\n\n    /**\n     * 删除知识库中的文件\n     * @param {string} repoId 知识库id\n     * @param {string} fileId 文件id\n     */\n    delFile(repoId, fileId) {\n        let kb = store.state.app.kb;\n        let repo = kb.findRepository(repoId);\n        if (repo) {\n            repo.removeFile(fileId);\n            store.dispatch('setKb', kb);\n        }\n    }\n\n}\n","import { render } from \"./index.vue?vue&type=template&id=79fff7d2&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=79fff7d2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-79fff7d2\"]])\n\nexport default __exports__"],"names":["class","style","key","_createElementBlock","_createVNode","_component_el_row","gutter","justify","default","_withCtx","_component_el_col","md","sm","xs","_createElementVNode","_hoisted_1","_hoisted_2","_toDisplayString","$options","totalFiles","totalChunks","lg","xl","onClick","_cache","$event","$data","createRepoDialogVisible","_hoisted_3","_component_el_icon","size","_component_Plus","_","_Fragment","_renderList","repos","repo","_createBlock","repoId","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","name","_hoisted_8","_component_el_tooltip","content","placement","_component_SvgIcon","openRepo","deleteRepo","_hoisted_9","description","_hoisted_10","_hoisted_11","createTime","_component_CustomDialog","modelValue","title","_component_el_form","model","newKbForm","rules","ref","_component_el_form_item","label","prop","_component_el_input","maxlength","type","_hoisted_12","_component_el_button","createRepo","_createTextVNode","repoDialogVisible","activeRepo","_hoisted_13","files","x","_hoisted_14","src","_imports_0","alt","_hoisted_15","_hoisted_16","toggleChunks","showChunks","delFile","fileId","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","formatFileSize","_hoisted_21","_hoisted_22","list","chunk","index","_normalizeClass","isChunkExpanded","toggleChunkContent","_hoisted_24","_hoisted_26","_hoisted_27","length","_hoisted_28","_component_el_scrollbar","height","_hoisted_25","_hoisted_23","_createCommentVNode","_hoisted_29","_component_el_upload","drag","handleLocalUpload","multiple","beforeUpload","accept","tip","isUploading","_component_el_progress","percentage","uploadProgress","status","_hoisted_30","uploadStatusText","_component_upload_filled","addRepo","kb","store","state","app","push","dispatch","delRepo","filter","updRepo","newRepo","findIndex","id","addFile","file","console","log","findRepository","removeFile","segmentit","useDefault","Segment","data","required","message","trigger","progressTimer","fileChunksVisibility","expandedChunks","computed","this","$store","chunkSize","setting","chunk_size","statistics","created","methods","$refs","validate","valid","Repository","Date","now","toLocaleString","kbStoreHelper","resetFields","$confirm","confirmButtonText","cancelButtonText","then","$notify","catch","maxSize","kb_file_size","options","simulateProgress","setInterval","remainingProgress","increment","Math","max","floor","readFileContent","trim","chunks","splitContentIntoChunks","clearInterval","fileData","File","split","pop","toLowerCase","map","Chunk","doSegment","word","w","setTimeout","error","fileType","readPdfContent","readDocContent","readTxtContent","Error","Promise","resolve","reject","reader","FileReader","onload","e","target","result","onerror","readAsText","fileReader","async","pdfData","Uint8Array","event","pdf","GlobalWorkerOptions","workerSrc","loadingTask","getDocument","pdfDoc","promise","fullText","i","numPages","page","getPage","textContent","getTextContent","pageText","items","item","str","join","readAsArrayBuffer","mammoth","arrayBuffer","extractRawText","value","bytes","k","sizes","parseFloat","pow","toFixed","currentChunk","sentences","sentence","chunkIndex","__exports__","render"],"sourceRoot":""}