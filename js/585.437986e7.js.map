{"version":3,"file":"js/585.437986e7.js","mappings":"sPACSA,MAAM,OAAOC,IAAI,W,GAD1BC,IAAA,EAUqBF,MAAM,mB,GACFA,MAAM,c,UAAuCG,EAAAA,EAAAA,IAAqB,YAAf,YAAQ,K,GAC3DH,MAAM,kB,GACNA,MAAM,kB,uIAZ3BI,EAAAA,EAAAA,IAqBM,MArBNC,EAqBM,EAnBFC,EAAAA,EAAAA,IAkBSC,EAAA,CAlBAC,OAAQ,GAAIC,QAAQ,SAASC,MAAA,wC,CAH9CC,SAAAC,EAAAA,EAAAA,KAIY,IAgBS,EAhBTN,EAAAA,EAAAA,IAgBSO,EAAA,CAhBAC,GAAI,GAAKC,GAAI,GAAKC,GAAI,I,CAJ3CL,SAAAC,EAAAA,EAAAA,KAQoB,IAAmC,gBAHvCR,EAAAA,EAAAA,IAG0Ca,EAAAA,GAAA,MAR1DC,EAAAA,EAAAA,IAQgCC,EAAAC,wBAALC,K,WAHXC,EAAAA,EAAAA,IAG0CC,EAAA,CAH/BC,KAAMH,EAAE,QAAUI,MAAOJ,EAAE,SAAWK,OAAQL,EAAE,UAAYM,UAAWN,EAAE,aAC/EO,OAAQP,EAAE,UAAYQ,aAAcR,EAAE,gBAAkBS,WAAYT,EAAE,cACtEU,MAAOV,EAAE,SAAWW,UAAWX,EAAE,aAAeY,OAAQZ,EAAE,W,yHAG5BF,EAAAe,UAAO,WAA1C9B,EAAAA,EAAAA,IASM,MATN+B,EASM,EARFhC,EAAAA,EAAAA,IAA6E,MAA7EiC,EAA6E,EAXjGC,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAW+CC,EAAAC,GAAG,kBAAmB,IAAC,GAAAC,KAClDtC,EAAAA,EAAAA,IAA6D,MAA7DuC,GAA6DJ,EAAAA,EAAAA,IAA9BC,EAAAC,GAAG,oBAAD,IACjCrC,EAAAA,EAAAA,IAKM,MALNwC,EAKM,EAJFrC,EAAAA,EAAAA,IAGUsC,EAAA,CAHDC,KAAK,UAAUC,KAAK,6CACxBC,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAE9B,EAAA+B,KAAK,Y,CAfzCvC,SAAAC,EAAAA,EAAAA,KAgB4B,IAA4B,EAhBxDyB,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAgB+BC,EAAAC,GAAG,qBAAD,MAhBjCW,EAAA,UAAAC,EAAAA,EAAAA,IAAA,UAAAD,EAAA,OAAAA,EAAA,K,kBA2BA,GACIE,KAAM,UACNC,SAAU,CAENC,MAAAA,GACI,OAAOC,KAAKC,OAAOC,MAAMC,IAAIJ,MACjC,EAEAnC,sBAAAA,GACI,MAAMwC,EAAgBJ,KAAKC,OAAOC,MAAMC,IAAIE,KAAKC,YAAYN,KAAKD,QAClE,OAAOK,GAAeG,MAAQ,EAClC,EAEA7B,OAAAA,GACI,OAAOsB,KAAKC,OAAOC,MAAMC,IAAIK,OAAgD,IAAvCR,KAAKpC,uBAAuB6C,MACtE,GAEJC,MAAO,CAEH,wBAAyB,CACrBC,MAAM,EACNC,QAAS,SAAUC,EAAQC,GAEvB,IAAIC,EAAaf,KAAKgB,MAAMC,QAAQC,UAAYlB,KAAKgB,MAAMC,QAAQE,cAAgBnB,KAAKgB,MAAMC,QAAQG,aAAe,IAChHL,GAILf,KAAKqB,WAAU,KACXrB,KAAKgB,MAAMC,QAAQC,UAAYlB,KAAKgB,MAAMC,QAAQG,YAAW,GAErE,GAGJ,0BAA2B,CACvBT,MAAM,EACNC,QAAS,SAAUC,EAAQC,GAEvBd,KAAKqB,WAAU,KACXrB,KAAKgB,MAAMC,QAAQC,UAAYlB,KAAKgB,MAAMC,QAAQG,YAAW,GAErE,GAEJnD,MAAO,SAAU4C,EAAQC,GAErBd,KAAKqB,WAAU,KACXrB,KAAKgB,MAAMC,QAAQC,UAAYlB,KAAKgB,MAAMC,QAAQG,YAAW,GAErE,GAEJE,OAAAA,GAEItB,KAAKqB,WAAU,KACXrB,KAAKgB,MAAMC,QAAQC,UAAYlB,KAAKgB,MAAMC,QAAQG,YAAW,GAErE,EACAG,QAAS,CAKL7B,IAAAA,CAAK8B,GACDxB,KAAKyB,QAAQC,KAAKF,EACtB,I,WCnFR,MAAMG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://THChatUI/./src/views/AppMain.vue","webpack://THChatUI/./src/views/AppMain.vue?7807"],"sourcesContent":["<template>\n    <div class=\"home\" ref=\"homeRef\">\n\n        <el-row :gutter=\"24\" justify=\"center\" style=\"margin-left: 0;margin-right: 0;\">\n            <el-col :md=\"18\" :sm=\"22\" :xs=\"22\">\n                <ChatCard :qaId=\"c['qaId']\" :query=\"c['query']\" :answer=\"c['answer']\" :modelName=\"c['modelName']\"\n                    :series=\"c['series']\" :responseTime=\"c['responseTime']\" :finishTime=\"c['finishTime']\"\n                    :files=\"c['files']\" :modelType=\"c['modelType']\" :recall=\"c['recall']\"\n                    v-for=\"c in active_session_qa_data\" />\n\n                <div class=\"title-container\" v-if=\"is_show\">\n                    <div class=\"title-line\">{{ $t('AppMain.title') }} <span>THChatUI</span></div>\n                    <div class=\"sub-title-line\">{{ $t('AppMain.welcome') }}</div>\n                    <div class=\"sub-title-line\">\n                        <el-link type=\"primary\" href=\"https://unagi-cq.github.io/THChatUI/#/docs\"\n                            @click=\"goTo('/about')\">\n                            {{ $t('AppMain.viewDocs') }}\n                        </el-link>\n                    </div>\n                </div>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    name: 'AppMain',\n    computed: {\n        // 当前激活的聊天记录uuid\n        active() {\n            return this.$store.state.app.active;\n        },\n        // 激活会话的QA对\n        active_session_qa_data() {\n            const activeSession = this.$store.state.app.chat.findSession(this.active);\n            return activeSession?.data || [];\n        },\n        // 等app数据加载之后再执行逻辑 否则会闪屏\n        is_show() {\n            return this.$store.state.app.ready && this.active_session_qa_data.length === 0;\n        }\n    },\n    watch: {\n        // 监听chat的变化，当变化时，表示在Bot回答，此时需要刷新滚动条的位置\n        \"$store.state.app.chat\": {\n            deep: true, //深度监听设置为 true\n            handler: function (newVal, oldVal) {\n                // 检查是否滚动到底部 给200px的误差控制 这里的200px可以根据实际需求调整\n                let isAtBottom = this.$refs.homeRef.scrollTop + this.$refs.homeRef.clientHeight >= this.$refs.homeRef.scrollHeight - 200;\n                if (!isAtBottom) {\n                    return;\n                }\n                // 内容更新时，保持滚动条的位置\n                this.$nextTick(() => {\n                    this.$refs.homeRef.scrollTop = this.$refs.homeRef.scrollHeight\n                });\n            }\n        },\n        // 监听active的变化，当变化时，表示切换了聊天选项卡，此时需要把滚动条的位置设置到最下方\n        \"$store.state.app.active\": {\n            deep: true, //深度监听设置为 true\n            handler: function (newVal, oldVal) {\n                // 内容更新时，保持滚动条的位置\n                this.$nextTick(() => {\n                    this.$refs.homeRef.scrollTop = this.$refs.homeRef.scrollHeight\n                });\n            }\n        },\n        query: function (newVal, oldVal) {\n            // 内容更新时，保持滚动条的位置\n            this.$nextTick(() => {\n                this.$refs.homeRef.scrollTop = this.$refs.homeRef.scrollHeight\n            });\n        }\n    },\n    created() {\n        // 内容更新时，保持滚动条的位置\n        this.$nextTick(() => {\n            this.$refs.homeRef.scrollTop = this.$refs.homeRef.scrollHeight\n        });\n    },\n    methods: {\n        /**\n         * 跳转页面函数\n         * @param path\n         */\n        goTo(path) {\n            this.$router.push(path)\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n/* 确保容器可以滚动 */\n.home {\n    height: 100%;\n    overflow-y: scroll;\n    scrollbar-width: none;\n    /* Firefox */\n}\n\n.home::-webkit-scrollbar {\n    display: none;\n    /* Chrome, Safari 和 Opera */\n}\n\n.el-link {\n    margin-right: 8px;\n}\n\n.el-link .el-icon--right.el-icon {\n    vertical-align: text-bottom;\n}\n\n.title-container {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -moz-box;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: column;\n    -moz-box-orient: vertical;\n    -moz-box-direction: normal;\n    flex-direction: column;\n    padding: 20px;\n    gap: 4px;\n    max-width: 1000px;\n    margin: 2vh auto;\n    width: fit-content;\n    text-align: center;\n    border-radius: 20px;\n}\n\n.title-container .title-line {\n    font-style: normal;\n    font-weight: 700;\n    font-size: 34px;\n    line-height: 52px;\n    color: #1a2029;\n    margin-bottom: 14px;\n}\n\n.title-container .title-line span {\n    color: #2454ff;\n}\n\n.title-container .sub-title-line {\n    font-size: 15px;\n}\n</style>\n","import { render } from \"./AppMain.vue?vue&type=template&id=6c3b9a03&scoped=true\"\nimport script from \"./AppMain.vue?vue&type=script&lang=js\"\nexport * from \"./AppMain.vue?vue&type=script&lang=js\"\n\nimport \"./AppMain.vue?vue&type=style&index=0&id=6c3b9a03&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6c3b9a03\"]])\n\nexport default __exports__"],"names":["class","ref","key","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_el_row","gutter","justify","style","default","_withCtx","_component_el_col","md","sm","xs","_Fragment","_renderList","$options","active_session_qa_data","c","_createBlock","_component_ChatCard","qaId","query","answer","modelName","series","responseTime","finishTime","files","modelType","recall","is_show","_hoisted_2","_hoisted_3","_createTextVNode","_toDisplayString","_ctx","$t","_hoisted_4","_hoisted_5","_hoisted_6","_component_el_link","type","href","onClick","_cache","$event","goTo","_","_createCommentVNode","name","computed","active","this","$store","state","app","activeSession","chat","findSession","data","ready","length","watch","deep","handler","newVal","oldVal","isAtBottom","$refs","homeRef","scrollTop","clientHeight","scrollHeight","$nextTick","created","methods","path","$router","push","__exports__","render"],"sourceRoot":""}